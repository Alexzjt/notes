# 大数据 资源限制类

#### 技巧

1. 哈希函数可以把数据按照种类均匀分流
2. 布隆过滤器用于集合的监理和查询，并可以节省大量空间
3. 一致性哈希解决数据服务器的负载管理问题
4. 利用并查集结构做岛问题的并行计算
5. 位图解决某一范围上数字的出现情况，并可以节省大量空间
6. 利用分段统计思想，并进一步节省大量空间
7. 利用堆、外排序来做多个处理单元的结果合并

#### 有一个包含100亿个URL的大文件，假设每个URL占用64Byte，请找出其中所有重复的URL

#### 从百亿数据中，求出热门Top100

搞很多大根堆，每个堆的堆顶组成一个堆H。此时堆顶就是全局最大。出堆顶，从堆顶元素的原始堆中选一个再入堆。

#### 32位无符号整数的范围是0到4294967295，现有40亿个无符号整数，可以使用最多1GB的内存。找出所有出现了两次的数

哈希函数分流

位图：00没出现 01出现1次，10出现2次，11出现多次。

使用两个bit表示一个数出现的个数，2*2^32/8=2^30，约等于1G

#### 找出40亿个无符号整数的中位数，假设10K内存。

一个整数是4字节，10K/4 = 2.5K，取2048个数，即2^11。

无符号整数的范围是0 ~ (2^32-1) ，则2^32/2^11 = 2^21 个段落

对于40亿个数，每次统计其出现在哪个段落上。求中位数就是求其第20亿个数。

统计在哪个段落上出现了第20亿个数，对该段落做类似上述过程。最终可找到中位数

#### 小内存使10g文件变为有序

计算小内存能放多少个数，形成大根堆。

过一次所有的数据，把最小的一些数和频率放入大跟堆。输出这些数到文件中。记录此时最大的数M。

第二次过数据时，忽略小于M的数、重复上述过程